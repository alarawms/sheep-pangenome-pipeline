/*
========================================================================================
    Test Configuration for Stage 1
    Minimal resource requirements for testing
========================================================================================
*/

params {
    // Test-specific parameters
    max_memory                  = '8.GB'
    max_cpus                    = 4
    max_time                    = '2.h'

    // Stage 1 test settings
    max_download_time           = '10.m'
    download_retries            = 1
    validation_strict           = false

    // Relaxed validation for testing
    genome_size_min             = 1.0e9    // 1 Gb minimum for testing
    genome_size_max             = 5.0e9    // 5 Gb maximum for testing
    gc_content_min              = 30.0     // 30% minimum GC
    gc_content_max              = 55.0     // 55% maximum GC
    n_content_max               = 10.0     // 10% maximum N content
    max_contigs                 = 100000   // More relaxed contig limit
}

process {
    // Override resource requirements for testing
    cpus   = { 1 }
    memory = { 1.GB * task.attempt }
    time   = { 30.m * task.attempt }

    // Test-specific process settings
    withName: 'DOWNLOAD_GENOME' {
        cpus   = 1
        memory = { 2.GB * task.attempt }
        time   = { params.max_download_time }
        maxRetries = 1
    }

    withName: 'VALIDATE_GENOME' {
        cpus   = 1
        memory = { 1.GB * task.attempt }
        time   = { 15.m * task.attempt }
        maxRetries = 1
    }
}